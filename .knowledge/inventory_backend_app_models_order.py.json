{"is_source_file": true, "format": "Python", "description": "This file defines ORM models for order-related entities in an e-commerce backend, including Order, OrderItem, and StripeEvent classes that map to database tables.", "external_files": ["../db.py"], "external_methods": ["datetime.utcnow"], "published": [], "classes": [{"name": "Order", "description": "Represents a customer order with status, customer info, totals, and relationships to order items."}, {"name": "OrderItem", "description": "Line item within an order, including product details, quantity, price, and relationship back to Order."}, {"name": "StripeEvent", "description": "Stores Stripe webhook events to ensure idempotency and support auditing."}], "methods": [{"name": "__tablename__", "description": "Defines the name of the database table for each model."}, {"name": "relationship", "description": "Establishes ORM relationships between Order and OrderItem, and for StripeEvent if needed."}], "calls": ["datetime.utcnow"], "search-terms": ["Order", "OrderItem", "StripeEvent", "sqlalchemy models", "order relationships", "stripe webhook storage"], "state": 2, "file_id": 9, "knowledge_revision": 19, "git_revision": "", "ctags": [{"_type": "tag", "name": "Order", "path": "/home/kavia/workspace/code-generation/serverless-e-commerce-checkout-system-215564-215573/inventory_backend/app/models/order.py", "pattern": "/^class Order(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "OrderItem", "path": "/home/kavia/workspace/code-generation/serverless-e-commerce-checkout-system-215564-215573/inventory_backend/app/models/order.py", "pattern": "/^class OrderItem(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "StripeEvent", "path": "/home/kavia/workspace/code-generation/serverless-e-commerce-checkout-system-215564-215573/inventory_backend/app/models/order.py", "pattern": "/^class StripeEvent(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__table_args__", "path": "/home/kavia/workspace/code-generation/serverless-e-commerce-checkout-system-215564-215573/inventory_backend/app/models/order.py", "pattern": "/^    __table_args__ = (UniqueConstraint(\"order_id\", \"product_id\", name=\"uq_order_product\"),)$/", "file": true, "language": "Python", "kind": "variable", "scope": "OrderItem", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/serverless-e-commerce-checkout-system-215564-215573/inventory_backend/app/models/order.py", "pattern": "/^    __tablename__ = \"order_items\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "OrderItem", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/serverless-e-commerce-checkout-system-215564-215573/inventory_backend/app/models/order.py", "pattern": "/^    __tablename__ = \"orders\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "Order", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/serverless-e-commerce-checkout-system-215564-215573/inventory_backend/app/models/order.py", "pattern": "/^    __tablename__ = \"stripe_events\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "StripeEvent", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/serverless-e-commerce-checkout-system-215564-215573/inventory_backend/app/models/order.py", "pattern": "/^    created_at: Mapped[datetime] = mapped_column(DateTime, nullable=False, default=datetime.utcn/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "Order", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/serverless-e-commerce-checkout-system-215564-215573/inventory_backend/app/models/order.py", "pattern": "/^    created_at: Mapped[datetime] = mapped_column(DateTime, nullable=False, default=datetime.utcn/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "OrderItem", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/serverless-e-commerce-checkout-system-215564-215573/inventory_backend/app/models/order.py", "pattern": "/^    created_at: Mapped[datetime] = mapped_column(DateTime, nullable=False, default=datetime.utcn/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "StripeEvent", "scopeKind": "class"}, {"_type": "tag", "name": "currency", "path": "/home/kavia/workspace/code-generation/serverless-e-commerce-checkout-system-215564-215573/inventory_backend/app/models/order.py", "pattern": "/^    currency: Mapped[str] = mapped_column(String(8), nullable=False, default=\"usd\")$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "Order", "scopeKind": "class"}, {"_type": "tag", "name": "currency", "path": "/home/kavia/workspace/code-generation/serverless-e-commerce-checkout-system-215564-215573/inventory_backend/app/models/order.py", "pattern": "/^    currency: Mapped[str] = mapped_column(String(8), nullable=False, default=\"usd\")$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "OrderItem", "scopeKind": "class"}, {"_type": "tag", "name": "customer_email", "path": "/home/kavia/workspace/code-generation/serverless-e-commerce-checkout-system-215564-215573/inventory_backend/app/models/order.py", "pattern": "/^    customer_email: Mapped[Optional[str]] = mapped_column(String(255), nullable=True)$/", "language": "Python", "typeref": "typename:Mapped[Optional[str]]", "kind": "variable", "scope": "Order", "scopeKind": "class"}, {"_type": "tag", "name": "event_id", "path": "/home/kavia/workspace/code-generation/serverless-e-commerce-checkout-system-215564-215573/inventory_backend/app/models/order.py", "pattern": "/^    event_id: Mapped[str] = mapped_column(String(128), nullable=False, unique=True, index=True)$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "StripeEvent", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/serverless-e-commerce-checkout-system-215564-215573/inventory_backend/app/models/order.py", "pattern": "/^    id: Mapped[int] = mapped_column(Integer, primary_key=True)$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "Order", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/serverless-e-commerce-checkout-system-215564-215573/inventory_backend/app/models/order.py", "pattern": "/^    id: Mapped[int] = mapped_column(Integer, primary_key=True)$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "OrderItem", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/serverless-e-commerce-checkout-system-215564-215573/inventory_backend/app/models/order.py", "pattern": "/^    id: Mapped[int] = mapped_column(Integer, primary_key=True)$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "StripeEvent", "scopeKind": "class"}, {"_type": "tag", "name": "items", "path": "/home/kavia/workspace/code-generation/serverless-e-commerce-checkout-system-215564-215573/inventory_backend/app/models/order.py", "pattern": "/^    items: Mapped[List[\"OrderItem\"]] = relationship($/", "language": "Python", "typeref": "typename:Mapped[List[\"OrderItem\"]]", "kind": "variable", "scope": "Order", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/serverless-e-commerce-checkout-system-215564-215573/inventory_backend/app/models/order.py", "pattern": "/^    name: Mapped[str] = mapped_column(String(255), nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "OrderItem", "scopeKind": "class"}, {"_type": "tag", "name": "order", "path": "/home/kavia/workspace/code-generation/serverless-e-commerce-checkout-system-215564-215573/inventory_backend/app/models/order.py", "pattern": "/^    order: Mapped[\"Order\"] = relationship(\"Order\", back_populates=\"items\")$/", "language": "Python", "typeref": "typename:Mapped[\"Order\"]", "kind": "variable", "scope": "OrderItem", "scopeKind": "class"}, {"_type": "tag", "name": "order_id", "path": "/home/kavia/workspace/code-generation/serverless-e-commerce-checkout-system-215564-215573/inventory_backend/app/models/order.py", "pattern": "/^    order_id: Mapped[int] = mapped_column(ForeignKey(\"orders.id\", ondelete=\"CASCADE\"), nullable=/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "OrderItem", "scopeKind": "class"}, {"_type": "tag", "name": "payload", "path": "/home/kavia/workspace/code-generation/serverless-e-commerce-checkout-system-215564-215573/inventory_backend/app/models/order.py", "pattern": "/^    payload: Mapped[str] = mapped_column(String(10000), nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "StripeEvent", "scopeKind": "class"}, {"_type": "tag", "name": "product_id", "path": "/home/kavia/workspace/code-generation/serverless-e-commerce-checkout-system-215564-215573/inventory_backend/app/models/order.py", "pattern": "/^    product_id: Mapped[int] = mapped_column(Integer, nullable=False, index=True)$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "OrderItem", "scopeKind": "class"}, {"_type": "tag", "name": "quantity", "path": "/home/kavia/workspace/code-generation/serverless-e-commerce-checkout-system-215564-215573/inventory_backend/app/models/order.py", "pattern": "/^    quantity: Mapped[int] = mapped_column(Integer, nullable=False, default=1)$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "OrderItem", "scopeKind": "class"}, {"_type": "tag", "name": "shipping_cents", "path": "/home/kavia/workspace/code-generation/serverless-e-commerce-checkout-system-215564-215573/inventory_backend/app/models/order.py", "pattern": "/^    shipping_cents: Mapped[int] = mapped_column(Integer, nullable=False, default=0)$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "Order", "scopeKind": "class"}, {"_type": "tag", "name": "sku", "path": "/home/kavia/workspace/code-generation/serverless-e-commerce-checkout-system-215564-215573/inventory_backend/app/models/order.py", "pattern": "/^    sku: Mapped[str] = mapped_column(String(64), nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "OrderItem", "scopeKind": "class"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/serverless-e-commerce-checkout-system-215564-215573/inventory_backend/app/models/order.py", "pattern": "/^    status: Mapped[str] = mapped_column(String(32), nullable=False, default=\"pending\")$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "Order", "scopeKind": "class"}, {"_type": "tag", "name": "stripe_checkout_session_id", "path": "/home/kavia/workspace/code-generation/serverless-e-commerce-checkout-system-215564-215573/inventory_backend/app/models/order.py", "pattern": "/^    stripe_checkout_session_id: Mapped[Optional[str]] = mapped_column(String(128), nullable=True/", "language": "Python", "typeref": "typename:Mapped[Optional[str]]", "kind": "variable", "scope": "Order", "scopeKind": "class"}, {"_type": "tag", "name": "stripe_payment_intent_id", "path": "/home/kavia/workspace/code-generation/serverless-e-commerce-checkout-system-215564-215573/inventory_backend/app/models/order.py", "pattern": "/^    stripe_payment_intent_id: Mapped[Optional[str]] = mapped_column(String(128), nullable=True, /", "language": "Python", "typeref": "typename:Mapped[Optional[str]]", "kind": "variable", "scope": "Order", "scopeKind": "class"}, {"_type": "tag", "name": "subtotal_cents", "path": "/home/kavia/workspace/code-generation/serverless-e-commerce-checkout-system-215564-215573/inventory_backend/app/models/order.py", "pattern": "/^    subtotal_cents: Mapped[int] = mapped_column(Integer, nullable=False, default=0)$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "Order", "scopeKind": "class"}, {"_type": "tag", "name": "tax_cents", "path": "/home/kavia/workspace/code-generation/serverless-e-commerce-checkout-system-215564-215573/inventory_backend/app/models/order.py", "pattern": "/^    tax_cents: Mapped[int] = mapped_column(Integer, nullable=False, default=0)$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "Order", "scopeKind": "class"}, {"_type": "tag", "name": "total_cents", "path": "/home/kavia/workspace/code-generation/serverless-e-commerce-checkout-system-215564-215573/inventory_backend/app/models/order.py", "pattern": "/^    total_cents: Mapped[int] = mapped_column(Integer, nullable=False, default=0)$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "Order", "scopeKind": "class"}, {"_type": "tag", "name": "type", "path": "/home/kavia/workspace/code-generation/serverless-e-commerce-checkout-system-215564-215573/inventory_backend/app/models/order.py", "pattern": "/^    type: Mapped[str] = mapped_column(String(128), nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "StripeEvent", "scopeKind": "class"}, {"_type": "tag", "name": "unit_price_cents", "path": "/home/kavia/workspace/code-generation/serverless-e-commerce-checkout-system-215564-215573/inventory_backend/app/models/order.py", "pattern": "/^    unit_price_cents: Mapped[int] = mapped_column(Integer, nullable=False, default=0)$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "OrderItem", "scopeKind": "class"}, {"_type": "tag", "name": "updated_at", "path": "/home/kavia/workspace/code-generation/serverless-e-commerce-checkout-system-215564-215573/inventory_backend/app/models/order.py", "pattern": "/^    updated_at: Mapped[datetime] = mapped_column($/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "Order", "scopeKind": "class"}, {"_type": "tag", "name": "updated_at", "path": "/home/kavia/workspace/code-generation/serverless-e-commerce-checkout-system-215564-215573/inventory_backend/app/models/order.py", "pattern": "/^    updated_at: Mapped[datetime] = mapped_column($/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "OrderItem", "scopeKind": "class"}], "hash": "67e87202d32f3b407b889f48e005ae90", "format-version": 4, "code-base-name": "inventory_backend", "filename": "inventory_backend/app/models/order.py", "fields": [{"name": "__table_args__ = (UniqueConstraint(\"order_id\", \"product_id\", name=\"uq_order_product\"),)", "scope": "OrderItem", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"order_items\"", "scope": "OrderItem", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"orders\"", "scope": "Order", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"stripe_events\"", "scope": "StripeEvent", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[datetime] created_at", "scope": "Order", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] currency", "scope": "Order", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[Optional[str]] customer_email", "scope": "Order", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] event_id", "scope": "StripeEvent", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[int] id", "scope": "Order", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[List[\"OrderItem\"]] items", "scope": "Order", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] name", "scope": "OrderItem", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[\"Order\"] order", "scope": "OrderItem", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[int] order_id", "scope": "OrderItem", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] payload", "scope": "StripeEvent", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[int] product_id", "scope": "OrderItem", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[int] quantity", "scope": "OrderItem", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[int] shipping_cents", "scope": "Order", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] sku", "scope": "OrderItem", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] status", "scope": "Order", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[Optional[str]] stripe_checkout_session_id", "scope": "Order", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[Optional[str]] stripe_payment_intent_id", "scope": "Order", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[int] subtotal_cents", "scope": "Order", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[int] tax_cents", "scope": "Order", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[int] total_cents", "scope": "Order", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] type", "scope": "StripeEvent", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[int] unit_price_cents", "scope": "OrderItem", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[datetime] updated_at", "scope": "Order", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"19": ""}]}